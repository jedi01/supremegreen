/*
 * jQuery Anystretch
 * Version 1.1
 * https://github.com/danmillar/jquery-anystretch
 *
 * Add a dynamically-resized background image to the body
 * of a page or any other block level element within it
 *
 * Copyright (c) 2012 Dan Millar (@danmillar / decode.uk.com)
 * Dual licensed under the MIT and GPL licenses.
 *
 * This is a fork of jQuery Backstretch (v1.2)
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 */
(function(a){a.fn.anystretch=function(b,c,d){var e=this.selector.length?!1:!0;return this.each(function(){function r(){if(b){var c;e||h.css({position:j.elPosition,background:"none"}),0==i.length?i=a("<div />").attr("class","anystretch").css({left:0,top:0,position:e?"fixed":"absolute",overflow:"hidden",zIndex:e?-999999:-999998,margin:0,padding:0,height:"100%",width:"100%"}):i.find("img").addClass("deleteable"),c=a("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(b){var e,f,c=a(this);c.css({width:"auto",height:"auto"}),e=this.width||a(b.target).width(),f=this.height||a(b.target).height(),l=e/f,s(function(){c.fadeIn(j.speed,function(){i.find(".deleteable").remove(),"function"==typeof d&&d()})})}).appendTo(i),0==h.children(".anystretch").length&&(e?a("body").append(i):h.append(i)),i.data("settings",j),c.attr("src",b),a(window).resize(s)}}function s(b){try{q={left:0,top:0},n=t(),o=n/l,o>=u()?(p=(o-u())/2,"center"==j.positionY||j.centeredY?a.extend(q,{top:"-"+p+"px"}):"bottom"==j.positionY&&a.extend(q,{top:"auto",bottom:"0px"})):(o=u(),n=o*l,p=(n-t())/2,"center"==j.positionX||j.centeredX?a.extend(q,{left:"-"+p+"px"}):"right"==j.positionX&&a.extend(q,{left:"auto",right:"0px"})),i.children("img:not(.deleteable)").width(n).height(o).filter("img").css(q)}catch(c){}"function"==typeof b&&b()}function t(){return e?h.width():h.innerWidth()}function u(){return e?h.height():h.innerHeight()}var l,n,o,p,q,g={positionX:"center",positionY:"center",speed:0,elPosition:"absolute"},h=a(this),i=e?a(".anystretch"):h.children(".anystretch"),j=i.data("settings")||g;return i.data("settings"),c&&"object"==typeof c&&a.extend(j,c),c&&"function"==typeof c&&(d=c),a(document).ready(r),this})},a.anystretch=function(b,c,d){var e="onorientationchange"in window?a(document):a(window);e.anystretch(b,c,d)}})(jQuery);
